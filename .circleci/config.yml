workflows:
  version: 2
  main:
    jobs:
      - node9
      - node8

base: &base
  environment:
    - workerCount: 4
    - timeout: 400000
  steps:
    - checkout
    - run: |
        git submodule update --init --recursive
        sudo npm install -g npm@latest
        npm --version
        npm uninstall typescript --no-save
        npm uninstall tslint --no-save
        time npm ci
        #npm update Appeared in Jenkins only
        npm test

version: 2
jobs:
  node9:
    docker:
      - image: circleci/node:9
    <<: *base
  node8:
    docker:
      - image: circleci/node:8
    <<: *base
